<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a1a">
    <title>A Valentine's Journey For Mercy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* PERFECT MOBILE-FIRST CSS */
        :root {
            --primary-color: #ffafbd;
            --primary-light: #ffdde1;
            --secondary-color: #8b0000;
            --background-dark: #0a0a1a;
            --card-dark: #1a1a2e;
            --text-light: #f5e9e9;
            --text-muted: #d1b3b3;
            --gold: #ffd700;
            --gold-light: #fff9c4;
            --accent: #ff6b8b;
            --success: #4CAF50;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Playfair Display', serif;
            background: var(--background-dark);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
            line-height: 1.6;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 175, 189, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 195, 160, 0.05) 0%, transparent 20%);
        }
        
        /* PERFECT CURTAIN EFFECT */
        #curtain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--secondary-color), #4a0000, #8b0000);
            z-index: 3000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            animation: curtainRise 2.2s cubic-bezier(0.77, 0, 0.175, 1) 3s forwards;
            padding: 20px;
            text-align: center;
            touch-action: manipulation;
            will-change: transform;
        }
        
        .curtain-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.3;
        }
        
        .skip-curtain {
            position: absolute;
            top: max(20px, env(safe-area-inset-top));
            right: max(20px, env(safe-area-inset-right));
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            color: var(--gold-light);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            cursor: pointer;
            z-index: 3001;
            animation: fadeInPulse 0.8s ease-in 1.2s forwards;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .skip-curtain:active {
            transform: scale(0.95);
            background: rgba(255, 255, 255, 0.25);
        }
        
        .curtain-text {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.8rem, 10vw, 5rem);
            color: var(--gold);
            text-align: center;
            margin-bottom: 15px;
            opacity: 0;
            animation: fadeInUp 1.8s cubic-bezier(0.19, 1, 0.22, 1) 0.5s forwards;
            line-height: 1.1;
            padding: 0 20px;
            text-shadow: 0 2px 20px rgba(255, 215, 0, 0.4);
            background: linear-gradient(to bottom, var(--gold), #ffed4e);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
        }
        
        .curtain-subtext {
            font-size: clamp(1.2rem, 5vw, 1.8rem);
            color: var(--gold-light);
            opacity: 0;
            animation: fadeInUp 1.8s cubic-bezier(0.19, 1, 0.22, 1) 1.2s forwards;
            padding: 0 20px;
            font-weight: 400;
            text-shadow: 0 2px 15px rgba(255, 255, 255, 0.2);
        }
        
        @keyframes curtainRise {
            to { 
                transform: translateY(-100%);
                opacity: 0;
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInPulse {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }
            70% {
                transform: scale(1.05);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* PERFECT MAIN CONTAINER */
        .container {
            max-width: 1400px;
            width: 100%;
            text-align: center;
            padding: clamp(20px, 5vw, 40px) clamp(15px, 4vw, 30px);
            opacity: 0;
            animation: fadeInMain 1.2s cubic-bezier(0.19, 1, 0.22, 1) 4.2s forwards;
            overflow: visible;
            position: relative;
        }
        
        @keyframes fadeInMain {
            to { 
                opacity: 1;
                transform: translateY(0);
            }
            from {
                opacity: 0;
                transform: translateY(20px);
            }
        }
        
        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.5rem, 9vw, 4.5rem);
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent), #ffc3a0);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1.5px;
            line-height: 1.05;
            text-shadow: 0 4px 30px rgba(255, 175, 189, 0.3);
            animation: gentleFloat 8s ease-in-out infinite;
        }
        
        /* PERFECT NAME ANIMATION */
        .her-name {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(3.5rem, 14vw, 7rem);
            color: var(--primary-color);
            font-weight: 700;
            margin: 15px 0 25px;
            text-shadow: 
                0 0 30px rgba(255, 175, 189, 0.5),
                0 0 60px rgba(255, 175, 189, 0.3),
                0 0 100px rgba(255, 175, 189, 0.1);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            line-height: 0.9;
            user-select: none;
            position: relative;
            display: inline-block;
            animation: gentleFloat 6s ease-in-out infinite;
            animation-delay: 0.5s;
        }
        
        .her-name::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .her-name:hover::after,
        .her-name:active::after {
            width: 80%;
        }
        
        .her-name:active {
            transform: scale(1.08);
            text-shadow: 
                0 0 40px rgba(255, 175, 189, 0.8),
                0 0 80px rgba(255, 175, 189, 0.5),
                0 0 120px rgba(255, 175, 189, 0.3);
        }
        
        @keyframes gentleFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(0.5deg); }
        }
        
        .tagline {
            font-size: clamp(1.1rem, 4vw, 1.6rem);
            color: var(--text-muted);
            margin: 40px auto;
            max-width: 900px;
            line-height: 1.7;
            padding: 0 20px;
            font-weight: 400;
            letter-spacing: 0.3px;
            opacity: 0.9;
        }
        
        /* PERFECT MUSIC CONTROLS */
        .music-controls {
            position: fixed;
            top: max(25px, env(safe-area-inset-top));
            right: max(25px, env(safe-area-inset-right));
            z-index: 200;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px) saturate(180%);
            border-radius: 50px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            min-width: 60px;
            min-height: 60px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .music-controls:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }
        
        .music-btn {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.4rem;
            cursor: pointer;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .music-btn:active {
            transform: scale(0.9);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .music-controls span {
            display: none;
            font-size: 1rem;
            color: var(--text-light);
            opacity: 0.9;
            font-weight: 500;
        }
        
        /* PERFECT GALLERY - Show full images beautifully */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin: 60px 0;
            touch-action: pan-y;
        }
        
        @media (max-width: 768px) {
            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 25px;
            }
        }
        
        @media (max-width: 480px) {
            .gallery {
                grid-template-columns: 1fr;
                gap: 30px;
                margin: 50px 0;
            }
        }
        
        .photo-frame {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            backdrop-filter: blur(20px);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.2),
                0 5px 15px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
            cursor: pointer;
            min-height: 320px;
            height: auto;
            animation: float 8s ease-in-out infinite;
            touch-action: manipulation;
            user-select: none;
            display: flex;
            flex-direction: column;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .photo-frame:nth-child(2n) {
            animation-delay: 1.5s;
        }
        
        .photo-frame:nth-child(3n) {
            animation-delay: 3s;
        }
        
        .photo-frame:hover,
        .photo-frame:active {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 
                0 25px 50px rgba(255, 175, 189, 0.15),
                0 10px 20px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 175, 189, 0.3);
        }
        
        .photo-frame img {
            width: 100%;
            height: 240px;
            object-fit: contain;
            background: linear-gradient(135deg, rgba(10, 10, 26, 0.7), rgba(26, 26, 46, 0.9));
            transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
            display: block;
            pointer-events: none;
            flex-shrink: 0;
            padding: 10px;
        }
        
        .photo-frame:hover img {
            transform: scale(1.05);
        }
        
        .photo-overlay {
            background: linear-gradient(to top, rgba(138, 0, 0, 0.85), rgba(138, 0, 0, 0.3), transparent);
            color: white;
            padding: 25px 20px 20px;
            opacity: 1;
            pointer-events: none;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            min-height: 100px;
        }
        
        .photo-overlay h3 {
            font-size: 1.6rem;
            margin-bottom: 8px;
            color: var(--gold-light);
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        .photo-overlay p {
            font-size: 1rem;
            opacity: 0.9;
            line-height: 1.5;
            font-weight: 400;
        }
        
        /* PERFECT TIMELINE */
        .timeline {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin: 40px 0 50px;
            flex-wrap: wrap;
            padding: 0 20px;
            touch-action: pan-y;
        }
        
        .timeline-dot {
            width: 18px;
            height: 18px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            flex-shrink: 0;
            border: 2px solid transparent;
        }
        
        .timeline-dot::before {
            content: '';
            position: absolute;
            top: -6px;
            left: -6px;
            right: -6px;
            bottom: -6px;
            border-radius: 50%;
            background: var(--primary-color);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .timeline-dot.active {
            background: var(--primary-color);
            transform: scale(1.4);
            box-shadow: 
                0 0 20px var(--primary-color),
                0 0 40px rgba(255, 175, 189, 0.3);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        .timeline-dot.active::before {
            opacity: 0.2;
        }
        
        .timeline-dot:active {
            transform: scale(1.2);
        }
        
        /* PERFECT MESSAGE SCREEN */
        .message-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 26, 0.95);
            backdrop-filter: blur(20px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: max(30px, env(safe-area-inset-top)) 20px max(100px, calc(env(safe-area-inset-bottom) + 80px));
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            opacity: 0;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .message-screen.active {
            display: flex;
            opacity: 1;
        }
        
        .message-card {
            background: linear-gradient(145deg, var(--card-dark), #16213e);
            padding: clamp(30px, 5vw, 50px) clamp(25px, 4vw, 40px);
            border-radius: 28px;
            max-width: 900px;
            width: 100%;
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.4),
                0 10px 20px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            border: 2px solid rgba(255, 175, 189, 0.2);
            transform: scale(0.95);
            animation: messagePop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            margin: auto;
            max-height: 85vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        @keyframes messagePop {
            0% {
                transform: scale(0.95);
                opacity: 0;
            }
            70% {
                transform: scale(1.02);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .message-card h2 {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.5rem, 6vw, 4rem);
            margin-bottom: 30px;
            color: var(--primary-color);
            line-height: 1.1;
            padding-right: 60px;
            text-shadow: 0 2px 20px rgba(255, 175, 189, 0.3);
            letter-spacing: 1px;
        }
        
        .message-text {
            font-size: clamp(1.2rem, 3.5vw, 1.8rem);
            line-height: 1.7;
            margin-bottom: 35px;
            color: var(--text-light);
            text-align: left;
            word-break: break-word;
            hyphens: auto;
            font-weight: 400;
            letter-spacing: 0.2px;
        }
        
        .typing-cursor {
            display: inline-block;
            width: 4px;
            height: 1.2em;
            background-color: var(--primary-color);
            animation: blink 1s infinite;
            margin-left: 4px;
            vertical-align: middle;
            border-radius: 2px;
            box-shadow: 0 0 10px var(--primary-color);
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        .signature {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            color: var(--gold);
            text-align: right;
            margin-top: 30px;
            margin-bottom: 10px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-shadow: 0 2px 15px rgba(255, 215, 0, 0.3);
        }
        
        /* PERFECT CLOSE BUTTON */
        .close-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            background: rgba(255, 175, 189, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.4rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        
        .close-btn:hover,
        .close-btn:active {
            background: var(--primary-color);
            color: var(--card-dark);
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 6px 30px rgba(255, 175, 189, 0.4);
        }
        
        /* PERFECT CLOSE HINT */
        .close-hint {
            position: fixed;
            bottom: max(25px, env(safe-area-inset-bottom));
            left: 0;
            right: 0;
            text-align: center;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            padding: 18px 20px;
            background: linear-gradient(to top, rgba(26, 26, 46, 0.95), rgba(26, 26, 46, 0.85));
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 175, 189, 0.2);
            display: none;
            z-index: 1002;
            margin: 0;
            animation: slideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            transform: translateY(100%);
        }
        
        .message-screen.active .close-hint {
            display: block;
            animation: slideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.3s forwards;
        }
        
        @keyframes slideUp {
            to { transform: translateY(0); }
        }
        
        /* PERFECT PARTICLES */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            color: var(--primary-color);
            font-size: 24px;
            animation: particleFloat 20s linear infinite;
            will-change: transform;
            opacity: 0;
            filter: drop-shadow(0 0 8px currentColor);
        }
        
        @keyframes particleFloat {
            0% {
                transform: translateY(110vh) rotate(0deg) scale(0.8);
                opacity: 0;
            }
            10% { 
                opacity: 0.7;
                transform: translateY(100vh) rotate(0deg) scale(1);
            }
            90% { 
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) rotate(720deg) scale(0.8);
                opacity: 0;
            }
        }
        
        /* PERFECT FOOTER */
        .footer-note {
            margin-top: 40px;
            color: var(--text-muted);
            font-size: 1rem;
            padding: 0 20px;
            font-style: italic;
            opacity: 0.8;
            letter-spacing: 0.5px;
        }
        
        /* RESPONSIVE PERFECTION */
        @media (min-width: 768px) {
            .music-controls span {
                display: inline;
            }
            
            .gallery {
                gap: 35px;
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            }
            
            .photo-frame {
                min-height: 360px;
            }
            
            .photo-frame img {
                height: 280px;
            }
            
            .photo-overlay {
                padding: 30px 25px 25px;
            }
        }
        
        @media (min-width: 1024px) {
            .container {
                padding: 60px 40px;
            }
            
            .gallery {
                gap: 40px;
            }
            
            .photo-frame {
                min-height: 380px;
            }
            
            .photo-frame img {
                height: 300px;
            }
            
            .message-card {
                padding: 60px 50px;
            }
        }
        
        /* REDUCED MOTION SUPPORT */
        @media (prefers-reduced-motion: reduce) {
            .photo-frame,
            .her-name,
            .close-btn,
            .music-btn,
            .skip-curtain {
                animation: none !important;
                transition: none !important;
            }
            
            .message-card {
                animation: none;
                transform: scale(1);
            }
        }
        
        /* DARK MODE ENHANCEMENTS */
        @media (prefers-color-scheme: dark) {
            .photo-frame {
                background: linear-gradient(145deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.01));
            }
            
            .message-card {
                background: linear-gradient(145deg, #151525, #111122);
            }
        }
        
        /* HIGH CONTRAST SUPPORT */
        @media (prefers-contrast: high) {
            .her-name {
                text-shadow: 0 0 10px var(--primary-color);
            }
            
            .timeline-dot.active {
                box-shadow: 0 0 15px var(--primary-color);
            }
        }
        
        /* LOADING STATES */
        .loading {
            position: relative;
            overflow: hidden;
        }
        
        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: loadingShimmer 1.5s infinite;
        }
        
        @keyframes loadingShimmer {
            to { left: 100%; }
        }
    </style>
</head>
<body>
    <!-- Perfect Curtain -->
    <div id="curtain">
        <div class="curtain-overlay"></div>
        <button class="skip-curtain" id="skipCurtain" aria-label="Skip introduction">
            <i class="fas fa-forward"></i>
        </button>
        <div class="curtain-text">A Special Presentation</div>
        <div class="curtain-subtext">For Someone Extraordinary</div>
    </div>
    
    <!-- Romantic Background Music -->
    <audio id="bgMusic" loop preload="metadata">
        <source src="https://assets.mixkit.co/music/preview/mixkit-romantic-moment-488.mp3" type="audio/mpeg">
        <source src="https://assets.mixkit.co/music/preview/mixkit-romantic-moment-488.mp3" type="audio/ogg">
    </audio>
    
    <!-- Music Controls -->
    <div class="music-controls">
        <button class="music-btn" id="musicToggle" aria-label="Toggle music">
            <i class="fas fa-volume-up"></i>
        </button>
        <span>Romantic Piano</span>
    </div>
    
    <!-- Animated Particles -->
    <div class="particles" id="particleContainer"></div>
    
    <!-- Main Content -->
    <div class="container">
        <h1>A Valentine's Journey For</h1>
        <div class="her-name" id="mercyName" role="button" aria-label="Double tap for a special message">Mercy</div>
        <p class="tagline">Each photograph reveals a beautiful memory. Gently scroll to explore, then tap any image to discover a heartfelt message written just for you, Mercy.</p>
        
        <!-- Interactive Timeline -->
        <div class="timeline" id="memoryTimeline" role="tablist">
            <div class="timeline-dot active" data-title="The Smile" data-message="1" role="tab" aria-selected="true"></div>
            <div class="timeline-dot" data-title="Your Presence" data-message="2" role="tab"></div>
            <div class="timeline-dot" data-title="Pure Joy" data-message="3" role="tab"></div>
            <div class="timeline-dot" data-title="Thoughtful Gaze" data-message="4" role="tab"></div>
            <div class="timeline-dot" data-title="Cherished Memory" data-message="5" role="tab"></div>
            <div class="timeline-dot" data-title="Authentically You" data-message="6" role="tab"></div>
        </div>
        
        <!-- Photo Gallery -->
        <div class="gallery" id="photoGallery">
            <div class="photo-frame" data-message="1" role="button" tabindex="0">
                <img src="https://i.imgur.com/Y02Zfi2.jpg" alt="Mercy's beautiful smile" loading="lazy">
                <div class="photo-overlay">
                    <h3>The Smile</h3>
                    <p>A radiant expression that brightens every moment</p>
                </div>
            </div>
            <div class="photo-frame" data-message="2" role="button" tabindex="0">
                <img src="https://i.imgur.com/ZwWvVow.jpg" alt="Mercy's lovely presence" loading="lazy">
                <div class="photo-overlay">
                    <h3>Your Presence</h3>
                    <p>A calming energy that makes every space better</p>
                </div>
            </div>
            <div class="photo-frame" data-message="3" role="button" tabindex="0">
                <img src="https://i.imgur.com/zO1i3rl.jpg" alt="Mercy's joyful spirit" loading="lazy">
                <div class="photo-overlay">
                    <h3>Pure Joy</h3>
                    <p>Laughter and happiness that's truly infectious</p>
                </div>
            </div>
            <div class="photo-frame" data-message="4" role="button" tabindex="0">
                <img src="https://i.imgur.com/O07So0q.jpg" alt="Mercy's thoughtful gaze" loading="lazy">
                <div class="photo-overlay">
                    <h3>Thoughtful Gaze</h3>
                    <p>A look that reveals depth and compassion</p>
                </div>
            </div>
            <div class="photo-frame" data-message="5" role="button" tabindex="0">
                <img src="https://i.imgur.com/brGNsm8.jpg" alt="A cherished memory with Mercy" loading="lazy">
                <div class="photo-overlay">
                    <h3>Cherished Memory</h3>
                    <p>A moment in time made perfect</p>
                </div>
            </div>
            <div class="photo-frame" data-message="6" role="button" tabindex="0">
                <img src="https://i.imgur.com/lgro0jh.jpg" alt="Mercy being authentically herself" loading="lazy">
                <div class="photo-overlay">
                    <h3>Authentically You</h3>
                    <p>Genuine in every way that matters</p>
                </div>
            </div>
        </div>
        
        <p class="footer-note">Crafted with thoughtful care for an extraordinary person ‚Ä¢ Happy Valentine's Day, Mercy</p>
    </div>
    
    <!-- Message Screen -->
    <div class="message-screen" id="messageScreen" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="messageTitle">
        <div class="message-card">
            <button class="close-btn" id="closeMessage" aria-label="Close message">
                <i class="fas fa-times"></i>
            </button>
            <h2 id="messageTitle">For Mercy</h2>
            <div class="message-text" id="messageText"></div>
            <div class="signature" id="messageSignature"></div>
        </div>
        <!-- Separate close hint -->
        <div class="close-hint">Tap outside the message or the X button to close</div>
    </div>

    <script>
        // ==================== PERFECT INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Create enhanced particles
            createParticles();
            
            // Setup music with better controls
            setupMusic();
            
            // Setup timeline
            setupTimeline();
            
            // Setup perfect gallery
            setupGallery();
            
            // Setup close button
            document.getElementById('closeMessage').addEventListener('click', closeMessage);
            
            // Setup Mercy name with better touch handling
            setupDoubleTap();
            
            // Setup skip curtain button
            document.getElementById('skipCurtain').addEventListener('click', skipCurtain);
            document.getElementById('skipCurtain').addEventListener('touchstart', function(e) {
                e.preventDefault();
                skipCurtain();
            });
            
            // First visit detection with better timing
            if (!sessionStorage.getItem('mercyValentineShown')) {
                setTimeout(() => {
                    openMessage(1, true);
                    sessionStorage.setItem('mercyValentineShown', 'true');
                }, 3600);
            }
            
            // Handle orientation changes
            window.addEventListener('orientationchange', handleOrientation);
            
            // Performance optimization
            optimizePerformance();
        });
        
        // ==================== PERFECT CURTAIN HANDLING ====================
        function skipCurtain() {
            const curtain = document.getElementById('curtain');
            const skipBtn = document.getElementById('skipCurtain');
            
            // Animate curtain removal
            curtain.style.animation = 'curtainRise 1.2s cubic-bezier(0.77, 0, 0.175, 1) forwards';
            
            // Hide skip button immediately
            skipBtn.style.opacity = '0';
            skipBtn.style.pointerEvents = 'none';
            
            // Show main content
            const container = document.querySelector('.container');
            container.style.animation = 'fadeInMain 1s cubic-bezier(0.19, 1, 0.22, 1) forwards';
            
            // Force curtain to disappear
            setTimeout(() => {
                curtain.style.display = 'none';
            }, 1200);
        }
        
        // ==================== PERFECT TOUCH HANDLERS ====================
        function setupDoubleTap() {
            const mercyName = document.getElementById('mercyName');
            let tapCount = 0;
            let tapTimer;
            
            mercyName.addEventListener('click', function(e) {
                tapCount++;
                
                if (tapCount === 1) {
                    tapTimer = setTimeout(function() {
                        tapCount = 0;
                        // Single tap effect
                        mercyName.style.animation = 'none';
                        setTimeout(() => {
                            mercyName.style.animation = 'gentleFloat 6s ease-in-out infinite 0.5s';
                        }, 10);
                    }, 350);
                } else if (tapCount === 2) {
                    clearTimeout(tapTimer);
                    tapCount = 0;
                    showEasterEgg();
                }
                
                e.preventDefault();
            });
            
            // Add haptic feedback for mobile
            mercyName.addEventListener('touchstart', function() {
                if (navigator.vibrate) {
                    navigator.vibrate(10);
                }
            });
        }
        
        // ==================== PERFECT PARTICLE SYSTEM ====================
        function createParticles() {
            const container = document.getElementById('particleContainer');
            const symbols = ['‚ù§', 'üíï', 'üíó', 'üíì', '‚ú®', 'üåü', 'üíñ', 'üå∏'];
            const particleCount = window.innerWidth < 768 ? 25 : 60;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.setAttribute('aria-hidden', 'true');
                particle.innerHTML = symbols[Math.floor(Math.random() * symbols.length)];
                
                // Random positioning
                particle.style.left = Math.random() * 100 + 'vw';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.fontSize = (Math.random() * 25 + 20) + 'px';
                particle.style.opacity = Math.random() * 0.6 + 0.3;
                particle.style.color = `hsl(${Math.random() * 30 + 330}, 100%, ${Math.random() * 30 + 70}%)`;
                
                container.appendChild(particle);
            }
        }
        
        // ==================== PERFECT MUSIC SYSTEM ====================
        function setupMusic() {
            const music = document.getElementById('bgMusic');
            const toggleBtn = document.getElementById('musicToggle');
            const icon = toggleBtn.querySelector('i');
            
            // Set initial volume
            music.volume = 0.25;
            
            // Enable audio on first interaction
            function enableAudio() {
                music.play().then(() => {
                    music.pause();
                    music.currentTime = 0;
                    toggleBtn.style.color = 'var(--primary-color)';
                }).catch(e => {
                    console.log("Audio initialization complete");
                });
                document.removeEventListener('click', enableAudio);
                document.removeEventListener('touchstart', enableAudio);
            }
            
            document.addEventListener('click', enableAudio, { once: true });
            document.addEventListener('touchstart', enableAudio, { once: true });
            
            // Toggle music with better feedback
            toggleBtn.addEventListener('click', toggleMusic);
            toggleBtn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                toggleMusic();
            });
            
            function toggleMusic() {
                if (music.paused) {
                    music.play().catch(e => console.log("Play failed:", e));
                    icon.className = 'fas fa-volume-up';
                    toggleBtn.setAttribute('aria-label', 'Mute music');
                    toggleBtn.style.color = 'var(--primary-color)';
                    // Haptic feedback
                    if (navigator.vibrate) navigator.vibrate(20);
                } else {
                    music.pause();
                    icon.className = 'fas fa-volume-mute';
                    toggleBtn.setAttribute('aria-label', 'Play music');
                    toggleBtn.style.color = 'var(--text-light)';
                }
            }
            
            // Auto-pause when tab is hidden
            document.addEventListener('visibilitychange', function() {
                if (document.hidden) {
                    music.pause();
                }
            });
        }
        
        // ==================== PERFECT TIMELINE ====================
        function setupTimeline() {
            const dots = document.querySelectorAll('.timeline-dot');
            
            dots.forEach(dot => {
                dot.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    // Add touch feedback
                    this.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        if (!this.classList.contains('active')) {
                            this.style.transform = '';
                        }
                        handleTimelineClick.call(this);
                    }, 150);
                });
                
                dot.addEventListener('click', handleTimelineClick);
                
                // Keyboard support
                dot.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        handleTimelineClick.call(this);
                    }
                });
            });
            
            function handleTimelineClick() {
                // Update active dot with animation
                dots.forEach(d => {
                    d.classList.remove('active');
                    d.setAttribute('aria-selected', 'false');
                    d.style.transform = '';
                });
                this.classList.add('active');
                this.setAttribute('aria-selected', 'true');
                
                // Open message
                const messageId = this.getAttribute('data-message');
                openMessage(messageId, false);
            }
        }
        
        // ==================== PERFECT GALLERY ====================
        function setupGallery() {
            const frames = document.querySelectorAll('.photo-frame');
            
            frames.forEach(frame => {
                let touchStartY = 0;
                let touchStartX = 0;
                let isScrolling = false;
                let touchTimer;
                
                frame.addEventListener('touchstart', function(e) {
                    touchStartY = e.touches[0].clientY;
                    touchStartX = e.touches[0].clientX;
                    isScrolling = false;
                    
                    // Visual feedback
                    this.style.transform = 'scale(0.98)';
                    
                    // Set timer for long press
                    touchTimer = setTimeout(() => {
                        this.style.transform = '';
                    }, 300);
                }, { passive: true });
                
                frame.addEventListener('touchmove', function(e) {
                    const touchEndY = e.touches[0].clientY;
                    const touchEndX = e.touches[0].clientX;
                    
                    const deltaY = Math.abs(touchEndY - touchStartY);
                    const deltaX = Math.abs(touchEndX - touchStartX);
                    
                    if (deltaY > 15 && deltaY > deltaX) {
                        isScrolling = true;
                        this.style.transform = '';
                        clearTimeout(touchTimer);
                    }
                }, { passive: true });
                
                frame.addEventListener('touchend', function(e) {
                    clearTimeout(touchTimer);
                    
                    if (!isScrolling) {
                        e.preventDefault();
                        this.style.transform = 'scale(0.95)';
                        
                        setTimeout(() => {
                            const messageId = this.getAttribute('data-message');
                            openMessage(messageId, false);
                            
                            // Update timeline
                            document.querySelectorAll('.timeline-dot').forEach(dot => {
                                dot.classList.remove('active');
                                dot.setAttribute('aria-selected', 'false');
                                if (dot.getAttribute('data-message') === messageId) {
                                    dot.classList.add('active');
                                    dot.setAttribute('aria-selected', 'true');
                                }
                            });
                            
                            this.style.transform = '';
                        }, 150);
                    } else {
                        this.style.transform = '';
                    }
                    
                    isScrolling = false;
                });
                
                // Desktop hover effects
                frame.addEventListener('mouseenter', function() {
                    if (window.innerWidth > 768) {
                        this.style.transform = 'translateY(-12px) scale(1.02)';
                    }
                });
                
                frame.addEventListener('mouseleave', function() {
                    if (window.innerWidth > 768 && !this.classList.contains('active')) {
                        this.style.transform = '';
                    }
                });
                
                // Click for desktop
                frame.addEventListener('click', function(e) {
                    if (window.innerWidth > 768) {
                        const messageId = this.getAttribute('data-message');
                        openMessage(messageId, false);
                        
                        document.querySelectorAll('.timeline-dot').forEach(dot => {
                            dot.classList.remove('active');
                            dot.setAttribute('aria-selected', 'false');
                            if (dot.getAttribute('data-message') === messageId) {
                                dot.classList.add('active');
                                dot.setAttribute('aria-selected', 'true');
                            }
                        });
                    }
                });
                
                // Keyboard support
                frame.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const messageId = this.getAttribute('data-message');
                        openMessage(messageId, false);
                        
                        document.querySelectorAll('.timeline-dot').forEach(dot => {
                            dot.classList.remove('active');
                            dot.setAttribute('aria-selected', 'false');
                            if (dot.getAttribute('data-message') === messageId) {
                                dot.classList.add('active');
                                dot.setAttribute('aria-selected', 'true');
                            }
                        });
                    }
                });
            });
        }
        
        // ==================== PERFECT MESSAGES ====================
        const messagesForMercy = {
            1: {
                title: "That Beautiful Smile of Yours",
                text: "Mercy, your smile is truly remarkable. It has a way of lighting up the space around you and bringing warmth to those who see it. This photo captures a genuine moment of joy that reflects your kind and generous nature. There's something about your smile that feels like sunshine breaking through clouds‚Äîit doesn't just change your face, it changes the entire atmosphere around you.",
                signature: "A smile that brightens every day"
            },
            2: {
                title: "The Gift of Your Presence",
                text: "Mercy, you have a special quality about your presence. There is a calm and steady energy you bring to any situation that makes everything feel more balanced. This photo reminds me of the quiet strength you possess‚Äîthe kind that doesn't need to announce itself but is always felt. In a world that's often loud and hurried, your presence feels like a deep breath of fresh air.",
                signature: "Grateful for your calming influence"
            },
            3: {
                title: "Your Infectious Joy",
                text: "Mercy, moments like these show your capacity for pure happiness. Your laughter is not just sound but an invitation for others to share in the moment. It is one of your most beautiful and uplifting qualities‚Äîthis ability to find joy and spread it so effortlessly. Your happiness has a ripple effect that touches everyone fortunate enough to be near you.",
                signature: "Celebrating your joyful spirit"
            },
            4: {
                title: "A Moment of Quiet Reflection",
                text: "Mercy, this thoughtful gaze reveals the depth of your character. It shows someone who observes carefully, thinks deeply, and cares genuinely about the world around them. There is wisdom and compassion in that expression‚Äîa quiet intelligence that doesn't need constant validation but speaks volumes in its stillness.",
                signature: "Admiring your thoughtful nature"
            },
            5: {
                title: "A Memory Worth Treasuring",
                text: "Mercy, this moment feels like more than just a photograph. It captures a genuine connection and shared experience that becomes part of a meaningful story. These are the moments that stay in memory long after they pass‚Äîthe kind of moments that become touchstones we return to, reminders of connection and shared humanity.",
                signature: "Remembering a beautiful time together"
            },
            6: {
                title: "Authentically and Wonderfully You",
                text: "Mercy, this photo shows you exactly as you are‚Äîauthentic, graceful, and true to yourself. In a world that often asks people to be something different, your authenticity stands out as genuinely remarkable and inspiring. There's a quiet confidence in being exactly who you are, and you carry that with such natural grace.",
                signature: "Honoring the person you truly are"
            }
        };
        
        function typeWriter(text, element, speed = 30) {
            element.innerHTML = '';
            
            const existingCursor = element.querySelector('.typing-cursor');
            if (existingCursor) {
                existingCursor.remove();
            }
            
            let i = 0;
            let currentText = '';
            
            function type() {
                if (i < text.length) {
                    currentText += text.charAt(i);
                    element.innerHTML = currentText + '<span class="typing-cursor"></span>';
                    i++;
                    setTimeout(type, speed);
                } else {
                    element.innerHTML = currentText + '<span class="typing-cursor"></span>';
                }
            }
            
            type();
        }
        
        function openMessage(messageId, isAutoOpening = false) {
            const message = messagesForMercy[messageId];
            const screen = document.getElementById('messageScreen');
            const title = document.getElementById('messageTitle');
            const text = document.getElementById('messageText');
            const signature = document.getElementById('messageSignature');
            
            // Update content
            title.textContent = message.title;
            signature.textContent = message.signature;
            
            // Clear text
            text.innerHTML = '';
            
            // Show screen with animation
            screen.style.display = 'flex';
            setTimeout(() => {
                screen.classList.add('active');
                screen.setAttribute('aria-hidden', 'false');
            }, 10);
            
            // Disable body scrolling smoothly
            document.body.style.overflow = 'hidden';
            document.body.style.position = 'fixed';
            document.body.style.width = '100%';
            document.body.style.height = '100%';
            
            // For auto-opening messages
            if (isAutoOpening) {
                const curtain = document.getElementById('curtain');
                curtain.style.display = 'none';
                
                const container = document.querySelector('.container');
                container.style.animation = 'fadeInMain 0.8s cubic-bezier(0.19, 1, 0.22, 1) forwards';
            }
            
            // Scroll to top
            screen.scrollTop = 0;
            
            // Start typing effect with delay
            setTimeout(() => {
                typeWriter(message.text, text, 20);
            }, 400);
            
            // Celebration effects
            createCelebrationParticles();
            
            // Haptic feedback for mobile
            if (navigator.vibrate) {
                navigator.vibrate([30, 20, 30]);
            }
        }
        
        function closeMessage() {
            const screen = document.getElementById('messageScreen');
            const textElement = document.getElementById('messageText');
            
            // Clear cursor
            const existingCursor = textElement.querySelector('.typing-cursor');
            if (existingCursor) {
                existingCursor.remove();
            }
            
            // Hide with animation
            screen.classList.remove('active');
            screen.setAttribute('aria-hidden', 'true');
            
            setTimeout(() => {
                screen.style.display = 'none';
            }, 400);
            
            // Restore body scrolling
            document.body.style.overflow = '';
            document.body.style.position = '';
            document.body.style.width = '';
            document.body.style.height = '';
            
            // Scroll to top smoothly
            setTimeout(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 100);
            
            // Haptic feedback
            if (navigator.vibrate) {
                navigator.vibrate(10);
            }
        }
        
        // Close message when tapping outside
        document.getElementById('messageScreen').addEventListener('click', function(e) {
            if (e.target === this) closeMessage();
        });
        
        // Escape key support
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeMessage();
            }
        });
        
        // ==================== PERFECT EASTER EGG ====================
        function showEasterEgg() {
            const screen = document.getElementById('messageScreen');
            const title = document.getElementById('messageTitle');
            const text = document.getElementById('messageText');
            const signature = document.getElementById('messageSignature');
            
            title.textContent = "Just One More Thing, Mercy";
            signature.textContent = "For all that you are and all that you do";
            
            const secretMessage = "There is something important I want to express, Mercy. You have an incredible way of making ordinary days feel meaningful. Your kindness is not just an action but part of who you are. Your strength does not need to announce itself; it quietly perseveres. Your presence in this world makes it genuinely better. This is not about a single day on a calendar. It is about taking a moment to acknowledge what a truly remarkable person you are, today and every day. Thank you for being exactly who you are.";
            
            text.innerHTML = '';
            screen.style.display = 'flex';
            setTimeout(() => {
                screen.classList.add('active');
                screen.setAttribute('aria-hidden', 'false');
            }, 10);
            
            document.body.style.overflow = 'hidden';
            document.body.style.position = 'fixed';
            document.body.style.width = '100%';
            document.body.style.height = '100%';
            
            setTimeout(() => {
                typeWriter(secretMessage, text, 12);
            }, 400);
            
            // Special celebration
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    createCelebrationParticles();
                }, i * 80);
            }
            
            // Extra haptic feedback
            if (navigator.vibrate) {
                navigator.vibrate([50, 30, 50, 30, 50]);
            }
        }
        
        function createCelebrationParticles() {
            const container = document.getElementById('particleContainer');
            const symbols = ['‚ù§', 'üíï', 'üíó', 'üíì', '‚ú®', 'üåü'];
            
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.setAttribute('aria-hidden', 'true');
                particle.innerHTML = symbols[Math.floor(Math.random() * symbols.length)];
                particle.style.left = Math.random() * 100 + 'vw';
                particle.style.animationDelay = '0s';
                particle.style.fontSize = (Math.random() * 30 + 20) + 'px';
                particle.style.opacity = 0.9;
                particle.style.color = `hsl(${Math.random() * 30 + 330}, 100%, 75%)`;
                container.appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 20000);
            }
        }
        
        // ==================== PERFECT ORIENTATION HANDLING ====================
        function handleOrientation() {
            clearTimeout(window.orientationTimer);
            window.orientationTimer = setTimeout(() => {
                // Refresh particles
                const particles = document.querySelectorAll('.particle');
                particles.forEach(p => {
                    p.style.left = Math.random() * 100 + 'vw';
                });
                
                // Close messages on orientation change
                closeMessage();
            }, 300);
        }
        
        // ==================== PERFECT PERFORMANCE OPTIMIZATION ====================
        function optimizePerformance() {
            // Use passive event listeners
            document.addEventListener('touchstart', function() {}, { passive: true });
            document.addEventListener('touchmove', function() {}, { passive: true });
            
            // Lazy load images
            const images = document.querySelectorAll('.photo-frame img');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        observer.unobserve(img);
                    }
                });
            });
            
            images.forEach(img => {
                img.dataset.src = img.src;
                img.src = '';
                imageObserver.observe(img);
            });
            
            // Optimize animations
            if ('requestIdleCallback' in window) {
                requestIdleCallback(() => {
                    // Load non-critical resources
                });
            }
        }
        
        // Handle visibility change
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'visible') {
                // Refresh animations when returning to page
                const mercyName = document.getElementById('mercyName');
                mercyName.style.animation = 'none';
                setTimeout(() => {
                    mercyName.style.animation = 'gentleFloat 6s ease-in-out infinite 0.5s';
                }, 10);
            }
        });
        
        // Add loading state management
        window.addEventListener('load', function() {
            document.body.classList.add('loaded');
            
            // Preload hover effects for desktop
            if (window.innerWidth > 768) {
                const frames = document.querySelectorAll('.photo-frame');
                frames.forEach(frame => {
                    frame.style.willChange = 'transform';
                });
            }
        });
    </script>
</body>
</html>
